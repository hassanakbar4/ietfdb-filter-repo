{% extends "base.html" %}
{# Copyright The IETF Trust 2015, All Rights Reserved #}
{% load origin %}

{% load nomcom_tags %}
{% load ietf_filters %}

{% block title %}NomCom {{ year }} Private{% block subtitle %}{% endblock %}{% endblock %}

{% block content %}
    {% origin %}

    <h1>NomCom {{ year }} {% if nomcom.group.state_id == 'conclude' %}(Concluded){% endif %} <small>Private area {% if is_chair_task %}- Chair/Advisors only{% endif %}</small></h1>

    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link {% if selected == "index" %}active{% endif %}" href="{% url "ietf.nomcom.views.private_index" year %}">Nominees</a>
        </li>

        {% if nomcom|has_publickey %}
            <li class="nav-item">
                <a class="nav-link {% if selected == "nominate" %}active{% endif %}" href="{% url 'ietf.nomcom.views.private_nominate' year %}">Nominate</a>
            </li>
            <li class="nav-item">
                <a class="nav-link {% if selected == "feedback" %}active{% endif %}" href="{% url 'ietf.nomcom.views.private_feedback' year %}">Enter feedback</a>
            </li>
        {% endif %}

        <li class="nav-item">
            <a class="nav-link {% if selected == "view_feedback" %}active{% endif %}" href="{% url 'ietf.nomcom.views.view_feedback' year %}">View feedback</a>
        </li>
        <li class="nav-item">
            <a class="nav-link {% if selected == "private_key" %}active{% endif %}" href="{% url 'ietf.nomcom.views.private_key' year %}">Private key</a>
        </li>

        {% if user|is_chair_or_advisor:year %}
            <li class="nav-item">
                <a class="nav-link {% if selected == "feedback_pending" %}active{% endif %}" href="{% url 'ietf.nomcom.views.view_feedback_pending' year %}">Pending emails&ensp;<span class="badge">{{nomcom.pending_email_count}}</span></a>
            </li>

            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">Chair/Advisor Tasks <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                    {% if nomcom.group.state_id == 'active' %}
                        <li role = "presentation" class = "dropdown-header">Feedback Management</li>
                        <li class="nav-item">
                            <a class="nav-link {% if selected == "feedback_email" %}active{% endif %}" href="{% url 'ietf.nomcom.views.private_feedback_email' year %}">Enter email feedback</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if selected == "questionnaire" %}active{% endif %}" href="{% url 'ietf.nomcom.views.private_questionnaire' year %}">Enter questionnaire response</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if selected == "extract_email_lists" %}active{% endif %}" href="{% url 'ietf.nomcom.views.extract_email_lists' year %}">Extract email lists</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if selected == "send_accept_reminder" %}active{% endif %}" href="{% url 'ietf.nomcom.views.send_reminder_mail' year "accept" %}">Send accept reminder</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if selected == "send_questionnaire_reminder" %}active{% endif %}" href="{% url 'ietf.nomcom.views.send_reminder_mail' year "questionnaire" %}">Send questionnaire reminder</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if selected == "merge_person" %}active{% endif %}" href="{% url "ietf.nomcom.views.private_merge_person" year %}">Request Person Record Merge</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if selected == "merge_nominee" %}active{% endif %}" href="{% url "ietf.nomcom.views.private_merge_nominee" year %}">Merge Nominee Records</a>
                        </li>
                    {% endif %}
                    <li role = "presentation" class = "dropdown-header">Nomcom Configuration</li>
                    <li class="nav-item">
                        <a class="nav-link {% if selected == "edit_nomcom" %}active{% endif %}" href="{% url 'ietf.nomcom.views.edit_nomcom' year %}">Edit Settings</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if selected == "edit_templates" %}active{% endif %}" href="{% url 'ietf.nomcom.views.list_templates' year %}">Edit Pages</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if selected == "edit_positions" %}active{% endif %}" href="{% url 'ietf.nomcom.views.list_positions' year %}">Edit Positions</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if selected == "edit_topics" %}active{% endif %}" href="{% url 'ietf.nomcom.views.list_topics' year %}">Edit Topics</a>
                    </li>
                    {% if nomcom.group.state_id == 'active' %}
                        <li class="nav-item">
                            <a class="nav-link {% if selected == "edit_members" %}active{% endif %}" href="{% url 'ietf.nomcom.views.edit_members' year %}">Edit Members</a>
                        </li>
                    {% endif %}
                    <li class="nav-item">
                        <a class="nav-link {% if selected == "help" %}active{% endif %}" href="{% url 'ietf.nomcom.views.configuration_help' year %}">Configuration Help</a>
                    </li>
                    <li role="presentation" class="dropdown-header">Other Tools</li>
                    <li class="nav-item">
                        <a class="nav-link {% if selected == "announce" %}active{% endif %}" href="{% url 'ietf.secr.announcement.views.main'%}">Announcement Tool</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if selected == "secr_verify" %}active{% endif %}" href="https://www.ietf.org/registration/nomcom_chair/nomcomstaff.py">Secretariat Private Eligibility Checker</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if selected == "secr_pub_verify" %}active{% endif %}" href="https://www.ietf.org/registration/nomcom.py">Secretariat Public Eligibility Checker</a>
                    </li>
                </ul>
            </li>
        {% endif %}
        {% if user|is_chair_or_advisor:year or user|has_role:"Secretariat" %}
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">Volunteers<span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                    <li class="nav-item">
                        <a class="nav-link {% if selected == "view_eligible" %}active{% endif %}" href="{% url 'ietf.nomcom.views.private_eligible' year %}">View Eligible</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if selected == "view_volunteers" %}active{% endif %}" href="{% url 'ietf.nomcom.views.private_volunteers' year %}">View Volunteers</a>
                    </li>
                </ul>
            </li>
        {% endif %}
    </ul>

    {% block nomcom_content %}
    {% endblock %}

{% endblock %}

{% block js %}
    <script>
        // Javascript to enable link to tab
        var url = document.location.toString();
        if (url.match('#')) {
            $('.nav-tabs a[href="#' + url.split('#')[1] + '"]').tab('show');
        }
        // Change hash for page-reload
        $('.nav-tabs a').on('shown.bs.tab', function (e) {
            window.location.hash = e.target.hash;
        })
    </script>
{% endblock %}
