{# Copyright The IETF Trust 2007, All Rights Reserved #}
{% extends "idtracker/base.html" %}

{% block title %}-- Search{% endblock %}

{% block idcontent %}

   {# does this belong here or is it better in the head? #}
   <script language="javascript">
   function clear_fields() {
      document.search_form.search_job_owner.selectedIndex=0;
      document.search_form.search_status_id.selectedIndex=0;
      document.search_form.search_area_acronym.selectedIndex=0;
      document.search_form.search_cur_state.selectedIndex=0;
      document.search_form.sub_state_id.selectedIndex=0;
      document.search_form.search_group_acronym.value = "";
      document.search_form.search_filename.value = "";
      document.search_form.search_rfcnumber.value = "";
      return true;
   }
   </script>
{% ifequal server_mode "development" %}
<font color="red">{{ mode }} Mode</font>
{% endifequal %}

<center>
{% if searching %}
{% else %}
   {% ifequal mode "IETF" %}
   <img src="/images/ietflogo2e.gif" border="0" height="137" width="280"><br>
   {% else %}
<form action="." method="GET" name="buttons">
<input type="hidden" name="display_menu" value="1">
<input type="submit" value="Documents that are on some Agenda" name="agenda_docs">
</form>
   {% endifequal %}
   <h1>{{mode}} I-D TRACKER</h1>
{% endif %}
<form action="." method="GET" name="search_form">
<table cellpadding="1" cellspacing="0" border="0">
<tr bgcolor="silver">
<th colspan="2">I-D - Search Criteria</th>
</tr>

<tr>
<td align="right"><label for="id_search_job_owner"><b>Responsible
AD:</b></label></td>
<td>{{ form.search_job_owner }}&nbsp;&nbsp;&nbsp;<label for="id_search_group_acronym">
<b>WG Acronym:</b></label>{{ form.search_group_acronym }}&nbsp;&nbsp;&nbsp;<label
for="id_search_status_id"><b>Status:</b></label>
{{ form.search_status_id }}</td>
</tr>

<tr>
<td align="right"><label for="id_search_cur_state"><b>Document
State:</b></label></td>
<td>{{ form.search_cur_state }} <label for="id_sub_state_id"><b>sub
state</b>: {{ form.sub_state_id }}</label> </td>
</tr>

<tr>
<td align="right"><label for=
"id_search_filename"><b>Filename:</b></label></td>
<td>{{ form.search_filename }} &nbsp;&nbsp;&nbsp; <label for=
"id_search_rfcnumber"><b>RFC Number:</b></label> {{ form.search_rfcnumber }}
&nbsp;&nbsp;&nbsp; <label for="id_search_area_acronym"><b>Area Acronym:</b></label>
{{ form.search_area_acronym }}</td>
</tr>

{% if form.errors %}
<tr>
<td colspan="2">Please fix the following errors and try your search again:
{{ form.errors }}</td>
</tr>
{% endif %}

<TR BGCOLOR="silver">
<TD ALIGN="CENTER" colspan="2"><INPUT TYPE="submit" VALUE="SEARCH" name="search_button">
<input type="button" value="Clear Fields" onClick="clear_fields();">
</TD>

</TR>
</table>
</form>
<!--- following if statement should be fixed with:
{% ifequal mode "IESG" %}
{% endifequal %}
--->
{% ifnotequal mode "IETF" %}
<HR>
<form action="." method="GET" name="ballot_search_form">
<table cellpadding="1" cellspacing="0" border="0" width="640">
<TR BGCOLOR="silver"><Th colspan="2">Ballot - Search Criteria</Th></TR>
<Tr><Td><b>Telechat date:</b> <select name="telechat_date"><option value="any">Any future telechat</option><option value="all">All telechat</option><option value="2008-01-10">2008-01-10</option><option value="2008-01-24">2008-01-24</option><option value="2008-02-07">2008-02-07</option><option value="2008-02-21">2008-02-21</option>
</select></td>
<td><b>My position:</b> <select name="my_position"><option value="">--All/Any</option><option value="no_record">No record</option><option value="yes_col">Yes</option><option value="no_col">No objection</option><option value="discuss">Discuss</option><option value="abstain">Abstain</option><option value="recuse">Recuse</option>
</select></td></tr>
<Tr BGCOLOR="silver"><td colspan="2" align="center"><input type="submit" value="  Display Ballots  "></td></tr>
</table>
</form>
{% endifnotequal %}
<HR>
Document States: <a href="/images/state_diagram.gif">State Diagram</a> and 
<a href="/idtracker/help/state/">State Explanations</a>

</center>

{% if matches %} 
<hr>
<b>Search Result</b><br>
    {% regroup matches by docstate as grouped %}
    {% include "idtracker/search_result_table.html" %}
{% else %} 
    {% if searching %}
	<p>No matches to your query.</p>
    {% endif %}
{% endif %}
{% if matches or searching %}
   {% include "idtracker/main_menu_button_snippet.html" %}
{% endif %}
<!--- following if statement should be fixed with:
{% ifequal mode "IESG" %}
{% endifequal %}
--->
{% ifnotequal mode "IETF" %}
<hr>
<form action="." method="GET">
<input type="submit" value="{% if default_search %}Disable{% else %}Enable{% endif %} Default Search" name="switch_default_search">
</form>
<hr>
<A HREF="https://www.ietf.org/IESG/internal/agenda.html">[Telechat Agenda (Web)]</a>
<p>
<A HREF="https://www.ietf.org/IESG/internal/agenda.txt">[Telechat Agenda (Text)]</a>
<p>
<A HREF="https://www.ietf.org/IESG/internal/agenda_pack.txt">[Telechat Agenda Package (Text)]</a> 
<p>
{% endifnotequal %}

{% endblock %}
