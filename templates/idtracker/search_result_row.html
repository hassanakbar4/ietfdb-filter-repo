{# Copyright The IETF Trust 2007, All Rights Reserved #}

{% load myifchanged %}
	{# we can't do alternating row colors with CSS alone #}
	<tr bgcolor="#{% myifchanged match.ballot_id %}{% cycle F8D6F8,E2AFE2 as ballotcolor %}{% else %}{% if match.synthetic %}{% cycle ballotcolor %}{% else %}{% cyclevalue ballotcolor %}{% endif %}{% endmyifchanged %}">

	{% if match.synthetic %}
		<td/>
	{% else %}
		<td><a href="{% url ietf.idtracker.views.view_id match.document.filename %}">Detail</a></td>
	{% endif %}
		
	<td>

<!--	    {# XXX need some magic to handle ballot sets here #}
	    {% if not match.primary_flag %}{% endif %}
-->
	    {{ match.document.filename_with_link }} 
		
	    {% ifequal match.document.status.status "Replaced" %}
	      <p class="replace">Replaced by
	      {% if match.document.replaced_by.idinternal %}
		<a href="{% url ietf.idtracker.views.search %}?search_filename={{ match.document.replaced_by.filename }}">
	      {% endif %}
	      {{ match.document.replaced_by.filename }}
	      {% if match.document.replaced_by.idinternal %}
		</a>
	      {% endif %}</p>
	    {% endifequal %}
	    
	    {% if match.document.replaces_set.count %}
	      <p class="replace">Replaces
	      {% for replaces in match.document.replaces_set.all %}
		{% if replaces.idinternal %}
		  <a href="{% url ietf.idtracker.views.search %}?search_filename={{ replaces.filename }}">
		{% endif %}
		{{ replaces.filename }}{% if replaces.idinternal %}</a>{% endif %}{% if not forloop.last %}</p><p class="replace">{% endif %}
	      {% endfor %}</p>
	    {% endif %}
        </td>

	<td>{{ match.document.revision_display }}</td>

	<td>{{ match.document.intended_status }}</td>

	<td>{{ match.job_owner }}</td>

	<td>{% firstof match.status_date "" %}</td>

	<td>{{ match.event_date }}</td>
	</tr>
